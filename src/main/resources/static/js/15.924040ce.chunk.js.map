{"version":3,"sources":["user/style.js","user/component/register.js"],"names":["LoginWrapper","styled","div","RegisterWrapper","TableWrapper","Expired","span","Revoke","EditWrapper","Title","h1","TabPane","Register","props","useState","tabKey","setTabKey","name","setName","sex","setSex","card","setCard","phone","setPhone","password","setPass","pass1","setPass1","address","setAddress","submit","url","data","result","success","msg","length","test","md5","checkVisitorData","checkAgentData","axios","method","Qs","stringify","headers","contentType","then","res","info","history","push","catch","error","console","log","visitorForm","prefix","type","style","color","placeholder","value","onChange","e","target","Group","defaultValue","onClick","block","to","agentForm","activeKey","key","tabBarStyle","textAlign","tab"],"mappings":"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","file":"static/js/15.924040ce.chunk.js","sourcesContent":["import styled from \"styled-components\";\r\n\r\nexport const LoginWrapper = styled.div`\r\n  width: 370px;\r\n  margin: 50px auto 0;\r\n  padding: 50px 20px;\r\n  background-color: #fff;\r\n`;\r\n\r\nexport const RegisterWrapper = styled.div`\r\n  width: 400px;\r\n  margin: 30px auto 0;\r\n  padding: 20px 20px 50px;\r\n  background-color: #fff;\r\n`;\r\n\r\nexport const TableWrapper = styled.div`\r\n  width: 100%;\r\n  background-color: #fff;\r\n  padding: 15px;\r\n  border-radius: 8px;\r\n`;\r\n\r\nexport const Expired = styled.span`\r\n  cursor: pointer;\r\n  padding: 5px 10px;\r\n  border-radius: 5px;\r\n  background-color: #f5f5f5;\r\n  color: #c9c9c9;\r\n  border: 1px solid #c9c9c9;\r\n`;\r\n\r\nexport const Revoke = styled.span`\r\n  cursor: pointer;\r\n  padding: 6px 11px;\r\n  border-radius: 5px;\r\n  background-color: #26bcd5;\r\n  color: #fff;\r\n`;\r\n\r\nexport const EditWrapper = styled.div`\r\n  width: 400px;\r\n  margin: 0 auto;\r\n`;\r\n\r\nexport const Title = styled.h1`\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  color: #38f;\r\n  text-align: center;\r\n`;\r\n","import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport Qs from \"qs\";\r\nimport md5 from \"md5\";\r\nimport { Tabs, Input, Button, Icon, Radio, message } from \"antd\";\r\nimport { RegisterWrapper } from \"../style\";\r\n\r\nconst { TabPane } = Tabs;\r\n\r\nconst Register = (props) => {\r\n\r\n  const [ tabKey, setTabKey ] = useState(\"1\");\r\n  const [ name, setName ] = useState(\"\");\r\n  const [ sex, setSex ] = useState(\"男\");\r\n  const [ card, setCard ] = useState(\"\");\r\n  const [ phone, setPhone ] = useState(\"\");\r\n  const [ password, setPass ] = useState(\"\");\r\n  const [ pass1, setPass1 ] = useState(\"\");\r\n  const [ address, setAddress ] = useState(\"\");\r\n\r\n  const TabChange = (key) => {\r\n    setTabKey(key);\r\n    if(\"1\" === key) {\r\n      setName(\"\");\r\n      setPhone(\"\");\r\n      setPass(\"\");\r\n      setPass1(\"\");\r\n      setAddress(\"\");\r\n    } else {\r\n      setName(\"\");\r\n      setSex(\"\");\r\n      setCard(\"\");\r\n      setPhone(\"\");\r\n      setPass(\"\");\r\n      setPass1(\"\");\r\n    }\r\n  };\r\n\r\n  const checkVisitorData = () => {\r\n    const pReg = /^[0-9]{11}$/g;\r\n    const cReg = /^(^[1-9]\\d{7}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}$)|(^[1-9]\\d{5}[1-9]\\d{3}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])((\\d{4})|\\d{3}[Xx])$)$/;\r\n\r\n    const result = { success: false, msg: \"\" }\r\n    if(!name.length) {\r\n      result.msg = \"姓名不能为空！\";\r\n    } else if(!cReg.test(card)) {\r\n      result.msg = \"身份证号格式错误！\";\r\n    } else if(!pReg.test(phone) || phone.length !== 11) {\r\n      result.msg = \"手机号格式错误！\";\r\n    } else if(!password.length || !pass1.length) {\r\n      result.msg = \"密码不能为空！\";\r\n    } else if(password !== pass1) {\r\n      result.msg = \"两次密码不一致，请重新输入！\";\r\n    } else {result.success = true;result.data = {name, sex, phone, card, password:md5(password)}}\r\n    return result;\r\n  };\r\n\r\n  const checkAgentData = () => {\r\n    const pReg = /^[0-9]{11}$/g;\r\n    const result = { success: false, msg: \"\" }\r\n    if(!name.length) {\r\n      result.msg = \"公司名不能为空！\";\r\n    } else if(!address.length) {\r\n      result.msg = \"公司地址不能为空！\";\r\n    } else if(!pReg.test(phone) || phone.length !== 11) {\r\n      result.msg = \"手机号格式错误！\";\r\n    } else if(!password.length || !pass1.length) {\r\n      result.msg = \"密码不能为空！\";\r\n    } else if(password !== pass1) {\r\n      result.msg = \"两次密码不一致，请重新输入！\";\r\n    } else {result.success = true;result.data = {name, address, phone, password:md5(password)}}\r\n    return result;\r\n  };\r\n\r\n  const submit = () => {\r\n    const url = tabKey === \"1\" ? \"/user/vRegister\" : \"/user/aRegister\";\r\n    const data = tabKey === \"1\" ? checkVisitorData() : checkAgentData();\r\n    if(data.success) {\r\n      axios({\r\n        method: \"post\",\r\n        url,\r\n        data: Qs.stringify(data.data),\r\n        headers: {contentType: \"application/x-www-form-urlencoded\"}\r\n      }).then(res => {\r\n        res = res.data;\r\n        message.info(res.msg);\r\n        if(res.success) {\r\n          props.history.push(\"/login\");\r\n        }\r\n      }).catch(error => {\r\n        console.log(error);\r\n        message.error(\"注册失败，请稍后再试！\");\r\n      });\r\n    } else message.error(data.msg);\r\n  };\r\n\r\n  const visitorForm = <div>\r\n    <Input\r\n      prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.5)' }} />}\r\n      placeholder=\"姓名\"\r\n      value={name}\r\n      onChange={e => setName(e.target.value)}\r\n    /><br/><br/>\r\n    <Input\r\n      prefix={<Icon type=\"idcard\" style={{ color: 'rgba(0,0,0,.5)' }} />}\r\n      placeholder=\"身份证号\"\r\n      value={card}\r\n      onChange={e => setCard(e.target.value)}\r\n    /><br/><br/>\r\n    <Input\r\n      prefix={<Icon type=\"mobile\" style={{ color: 'rgba(0,0,0,.5)' }} />}\r\n      placeholder=\"11位手机号\"\r\n      value={phone}\r\n      onChange={e => setPhone(e.target.value)}\r\n    /><br/><br/>\r\n    <Input\r\n      prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.5)' }} />}\r\n      placeholder=\"密码\"\r\n      type=\"password\"\r\n      value={password}\r\n      onChange={e => setPass(e.target.value)}\r\n    /><br/><br/>\r\n    <Input\r\n      prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.5)' }} />}\r\n      placeholder=\"确认密码\"\r\n      type=\"password\"\r\n      value={pass1}\r\n      onChange={e => setPass1(e.target.value)}\r\n    /><br/><br/>\r\n    <Radio.Group defaultValue={sex} onChange={e => setSex(e.target.value)}>\r\n      <Radio value={\"男\"}>男</Radio>\r\n      <Radio value={\"女\"}>女</Radio>\r\n    </Radio.Group><br/><br/>\r\n    <Button type=\"primary\" onClick={submit} block>马上注册</Button><br/><br/>\r\n    已有账号？<Link to=\"/login\">去登录</Link>\r\n  </div>\r\n\r\n  const agentForm = <div>\r\n    <Input\r\n      prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.5)' }} />}\r\n      placeholder=\"公司名\"\r\n      value={name}\r\n      onChange={e => setName(e.target.value)}\r\n    /><br/><br/>\r\n    <Input\r\n      prefix={<Icon type=\"bank\" style={{ color: 'rgba(0,0,0,.5)' }} />}\r\n      placeholder=\"公司地址\"\r\n      value={address}\r\n      onChange={e => setAddress(e.target.value)}\r\n    /><br/><br/>\r\n    <Input\r\n      prefix={<Icon type=\"mobile\" style={{ color: 'rgba(0,0,0,.5)' }} />}\r\n      placeholder=\"11位手机号\"\r\n      value={phone}\r\n      onChange={e => setPhone(e.target.value)}\r\n    /><br/><br/>\r\n    <Input\r\n      prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.5)' }} />}\r\n      placeholder=\"密码\"\r\n      type=\"password\"\r\n      value={password}\r\n      onChange={e => setPass(e.target.value)}\r\n    /><br/><br/>\r\n    <Input\r\n      prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.5)' }} />}\r\n      placeholder=\"确认密码\"\r\n      type=\"password\"\r\n      value={pass1}\r\n      onChange={e => setPass1(e.target.value)}\r\n    /><br/><br/>\r\n    <Button type=\"primary\" onClick={submit} block>马上注册</Button><br/><br/>\r\n    已有账号？<Link to=\"/login\">去登录</Link>\r\n  </div>\r\n\r\n  return (<RegisterWrapper>\r\n    <Tabs activeKey={tabKey} onChange={TabChange} tabBarStyle={{textAlign: \"center\"}}>\r\n      <TabPane tab=\"游客注册\" key=\"1\">\r\n        {visitorForm}\r\n      </TabPane>\r\n      <TabPane tab=\"旅行社注册\" key=\"2\">\r\n        {agentForm}\r\n      </TabPane>\r\n    </Tabs> \r\n  </RegisterWrapper>);\r\n}\r\n\r\nexport default Register;\r\n"],"sourceRoot":""}
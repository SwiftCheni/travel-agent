{"version":3,"sources":["user/style.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","user/component/login.js"],"names":["LoginWrapper","styled","div","RegisterWrapper","TableWrapper","Expired","span","Revoke","EditWrapper","Title","h1","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","connect","dispatch","login","user","loginAction","props","useState","account","setAccount","password","setPass","role","setRole","submit","phone","flag","test","length","warn","axios","method","url","data","Qs","stringify","md5","headers","then","res","info","msg","success","history","replace","catch","error","console","log","prefix","type","style","color","placeholder","onChange","e","target","Group","defaultValue","block","onClick","to"],"mappings":"y9CAEO,IAAMA,EAAeC,IAAOC,IAAV,KAOZC,EAAkBF,IAAOC,IAAV,KAOfE,EAAeH,IAAOC,IAAV,KAOZG,EAAUJ,IAAOK,KAAV,KASPC,EAASN,IAAOK,KAAV,KAQNE,EAAcP,IAAOC,IAAV,KAKXO,EAAQR,IAAOS,GAAV,M,iCC7CH,SAASC,EAAgBC,EAAKC,EAAKC,GAYhD,OAXID,KAAOD,EACTG,OAAOC,eAAeJ,EAAKC,EAAK,CAC9BC,MAAOA,EACPG,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZP,EAAIC,GAAOC,EAGNF,EAZT,mC,qdC4FeQ,sBAAQ,MARI,SAACC,GAC1B,MAAO,CACLC,MADK,SACCC,GACJF,EAASG,YAAYD,QAKZH,EAlFD,SAACK,GAAW,IAAD,EAESC,mBAAS,IAFlB,mBAEfC,EAFe,KAENC,EAFM,OAGOF,mBAAS,IAHhB,mBAGfG,EAHe,KAGLC,EAHK,OAIGJ,mBAAS,GAJZ,mBAIfK,EAJe,KAITC,EAJS,KAMfV,EAAUG,EAAVH,MAEFW,EAAS,SAACC,EAAOL,EAAUM,GAElB,eAEJC,KAAKF,IAA2B,KAAjBA,EAAMG,OAEpBR,EAASQ,QAAU,EAC3B,IAAQC,KAAK,uCAAU,GAEvBC,IAAM,CACJC,OAAQ,OACRC,IAAK,cACLC,KAAMC,IAAGC,UAAU,CACjBV,QACAL,SAAUgB,IAAIhB,GACdM,SAEFW,QAAS,CACP,eAAgB,uCAEjBC,MAAK,SAAAC,GAGN,GAFAA,EAAMA,EAAIN,KACV,IAAQO,KAAKD,EAAIE,IAAK,GACnBF,EAAIG,QAAS,CACd,IAAMpB,EAAgB,IAATI,EAAa,UAAY,QACtCb,E,yVAAM,CAAD,GAAK0B,EAAIzB,KAAT,CAAeQ,UACpBN,EAAM2B,QAAQC,QAAQ,SAEvBC,OAAM,SAAAC,GACPC,QAAQC,IAAIF,GACZ,IAAQA,MAAM,iCAAS,MAzBzB,IAAQjB,KAAK,6CAAW,IA8B5B,OACE,kBAAC,IAAD,KACE,uBACEoB,OAAQ,uBAAMC,KAAK,SAASC,MAAO,CAAEC,MAAO,oBAC5CC,YAAY,6BACZhD,MAAOa,EACPoC,SAAU,SAAAC,GAAC,OAAIpC,EAAWoC,EAAEC,OAAOnD,UAErC,6BAAK,6BACL,uBACE4C,OAAQ,uBAAMC,KAAK,OAAOC,MAAO,CAAEC,MAAO,oBAC1C/C,MAAOe,EACP8B,KAAK,WACLG,YAAY,eACZC,SAAU,SAAAC,GAAC,OAAIlC,EAAQkC,EAAEC,OAAOnD,UAElC,6BAAK,6BACL,sBAAOoD,MAAP,CAAaC,aAAcpC,EAAMgC,SAAU,SAAAC,GAAC,OAAIhC,EAAQgC,EAAEC,OAAOnD,SAC/D,uBAAOA,MAAO,GAAd,4BACA,uBAAOA,MAAO,GAAd,mCAEF,6BAAK,6BACL,uBAAQ6C,KAAK,UAAUS,OAAK,EAACC,QAAS,SAAAL,GAAC,OAAI/B,EAAON,EAASE,EAAUE,KAArE,gBAGA,6BAAK,6BAxBP,iCAyBO,kBAAC,IAAD,CAAMuC,GAAG,aAAT","file":"static/js/11.dc39526b.chunk.js","sourcesContent":["import styled from \"styled-components\";\r\n\r\nexport const LoginWrapper = styled.div`\r\n  width: 370px;\r\n  margin: 50px auto 0;\r\n  padding: 50px 20px;\r\n  background-color: #fff;\r\n`;\r\n\r\nexport const RegisterWrapper = styled.div`\r\n  width: 400px;\r\n  margin: 30px auto 0;\r\n  padding: 20px 20px 50px;\r\n  background-color: #fff;\r\n`;\r\n\r\nexport const TableWrapper = styled.div`\r\n  width: 100%;\r\n  background-color: #fff;\r\n  padding: 15px;\r\n  border-radius: 8px;\r\n`;\r\n\r\nexport const Expired = styled.span`\r\n  cursor: pointer;\r\n  padding: 5px 10px;\r\n  border-radius: 5px;\r\n  background-color: #f5f5f5;\r\n  color: #c9c9c9;\r\n  border: 1px solid #c9c9c9;\r\n`;\r\n\r\nexport const Revoke = styled.span`\r\n  cursor: pointer;\r\n  padding: 6px 11px;\r\n  border-radius: 5px;\r\n  background-color: #26bcd5;\r\n  color: #fff;\r\n`;\r\n\r\nexport const EditWrapper = styled.div`\r\n  width: 400px;\r\n  margin: 0 auto;\r\n`;\r\n\r\nexport const Title = styled.h1`\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  color: #38f;\r\n  text-align: center;\r\n`;\r\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport axios from \"axios\";\r\nimport Qs from \"qs\";\r\nimport md5 from \"md5\";\r\nimport { Input, Icon, Radio, Button, message } from \"antd\";\r\nimport { loginAction } from \"../../store/action\";\r\nimport { LoginWrapper } from \"../style\";\r\n\r\nconst Login = (props) => {\r\n\r\n  const [ account, setAccount ] = useState(\"\");\r\n  const [ password, setPass ] = useState(\"\");\r\n  const [ role, setRole ] = useState(1);\r\n\r\n  const { login } = props;\r\n\r\n  const submit = (phone, password, flag) => {\r\n\r\n    const pReg = /^[0-9]{11}$/g;\r\n\r\n    if(!pReg.test(phone) || phone.length !== 11) {\r\n      message.warn(\"账号格式错误！\", 5);\r\n    } else if(password.length <= 0) {\r\n      message.warn(\"请输入密码！\", 5);\r\n    } else {\r\n      axios({\r\n        method: \"post\",\r\n        url: \"/user/login\",\r\n        data: Qs.stringify({\r\n          phone,\r\n          password: md5(password),\r\n          flag\r\n        }),\r\n        headers: {\r\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\r\n        }\r\n      }).then(res => {\r\n        res = res.data;\r\n        message.info(res.msg, 5);\r\n        if(res.success) {\r\n          const role = flag === 1 ? \"visitor\" : \"agent\";\r\n          login({...res.user, role});\r\n          props.history.replace(\"/\");\r\n        }\r\n      }).catch(error => {\r\n        console.log(error);\r\n        message.error(\"登录失败！\", 5)\r\n      })\r\n    }\r\n  };\r\n\r\n  return (\r\n    <LoginWrapper>\r\n      <Input\r\n        prefix={<Icon type=\"mobile\" style={{ color: 'rgba(0,0,0,.5)' }} />}\r\n        placeholder=\"11位手机号\"\r\n        value={account}\r\n        onChange={e => setAccount(e.target.value)}\r\n      />\r\n      <br/><br/>\r\n      <Input\r\n        prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.5)' }} />}\r\n        value={password}\r\n        type=\"password\"\r\n        placeholder=\"密码\"\r\n        onChange={e => setPass(e.target.value)}\r\n      />\r\n      <br/><br/>\r\n      <Radio.Group defaultValue={role} onChange={e => setRole(e.target.value)}>\r\n        <Radio value={1}>游客登录</Radio>\r\n        <Radio value={0}>旅行社登录</Radio>\r\n      </Radio.Group>\r\n      <br/><br/>\r\n      <Button type=\"primary\" block onClick={e => submit(account, password, role)}>\r\n        登录\r\n      </Button>\r\n      <br/><br/>\r\n      没有账号？<Link to=\"/register\">马上注册</Link>\r\n    </LoginWrapper>\r\n  );\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    login(user) {\r\n      dispatch(loginAction(user));\r\n    }\r\n  }\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(Login);\r\n"],"sourceRoot":""}
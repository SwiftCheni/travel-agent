(this.webpackJsonptravel=this.webpackJsonptravel||[]).push([[12],{226:function(e,t,n){"use strict";n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"f",(function(){return m})),n.d(t,"b",(function(){return b})),n.d(t,"e",(function(){return h})),n.d(t,"a",(function(){return g})),n.d(t,"g",(function(){return v}));var r=n(29),a=n(30);function o(){var e=Object(r.a)(["\n  font-size: 20px;\n  font-weight: bold;\n  color: #38f;\n  text-align: center;\n"]);return o=function(){return e},e}function u(){var e=Object(r.a)(["\n  width: 400px;\n  margin: 0 auto;\n"]);return u=function(){return e},e}function i(){var e=Object(r.a)(["\n  cursor: pointer;\n  padding: 6px 11px;\n  border-radius: 5px;\n  background-color: #26bcd5;\n  color: #fff;\n"]);return i=function(){return e},e}function l(){var e=Object(r.a)(["\n  cursor: pointer;\n  padding: 5px 10px;\n  border-radius: 5px;\n  background-color: #f5f5f5;\n  color: #c9c9c9;\n  border: 1px solid #c9c9c9;\n"]);return l=function(){return e},e}function c(){var e=Object(r.a)(["\n  width: 100%;\n  background-color: #fff;\n  padding: 15px;\n  border-radius: 8px;\n"]);return c=function(){return e},e}function s(){var e=Object(r.a)(["\n  width: 400px;\n  margin: 30px auto 0;\n  padding: 20px 20px 50px;\n  background-color: #fff;\n"]);return s=function(){return e},e}function d(){var e=Object(r.a)(["\n  width: 370px;\n  margin: 50px auto 0;\n  padding: 50px 20px;\n  background-color: #fff;\n"]);return d=function(){return e},e}var p=a.b.div(d()),f=a.b.div(s()),m=a.b.div(c()),b=a.b.span(l()),h=a.b.span(i()),g=a.b.div(u()),v=a.b.h1(o())},454:function(e,t,n){"use strict";n.r(t);n(131);var r=n(68),a=(n(447),n(443)),o=(n(395),n(446)),u=(n(448),n(445)),i=(n(130),n(91)),l=(n(129),n(65)),c=n(266),s=n(47),d=n(48),p=n(52),f=n(49),m=n(51),b=n(0),h=n.n(b),g=n(46),v=n(27),y=n(40),O=n.n(y),x=n(227),E=n.n(x),j=n(217),w=n.n(j),P=n(226);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=n.state.id,r=n.props.user.id;n.props.form.validateFieldsAndScroll((function(e,a){if(!e)if(t){var o=D({},a,{time:a.time.format("YYYY-MM-DD"),id:t});n.handleModRoute(o)}else{var u=D({},a,{time:a.time.format("YYYY-MM-DD"),id_company:r});console.log(u),n.handleAddRoute(u)}}))},n.state={id:null},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"getRouteByParamId",value:function(e){var t=this;O.a.get("/route/oneRoute?id=".concat(e)).then((function(e){e.data.success&&(console.log(e.data.route),t.setState(e.data.route))})).catch((function(e){console.log(e),l.a.warn("\u521d\u59cb\u5316\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")}))}},{key:"handleModRoute",value:function(e){var t=this;O()({method:"post",url:"/route/modRoute",headers:{contentType:"application/x-www-form-urlencoded"},data:E.a.stringify(e)}).then((function(e){l.a.info(e.data.msg),e.data.success&&t.props.history.push("/myRoute")})).catch((function(e){console.log(e),l.a.error("\u64cd\u4f5c\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")}))}},{key:"handleAddRoute",value:function(e){var t=this;O()({method:"post",url:"/route/addRoute",headers:{contentType:"application/x-www-form-urlencoded"},data:E.a.stringify(e)}).then((function(e){l.a.info(e.data.msg),e.data.success&&t.props.history.push("/myRoute")})).catch((function(e){console.log(e),l.a.error("\u64cd\u4f5c\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5")}))}},{key:"componentDidMount",value:function(){var e=this.props.match.params.id;e&&this.getRouteByParamId(e)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state,n=t.name,l=t.flight,c=t.flightPrice,s=t.hotel,d=t.hotelPrice,p=t.time,f=t.other,m=t.period;return null!==this.props.user&&"agent"===this.props.user.role?h.a.createElement(P.f,null,h.a.createElement(P.a,null,h.a.createElement(P.g,null,"\u7f16\u8f91\u8def\u7ebf"),h.a.createElement("br",null),h.a.createElement(u.a,Object.assign({},{labelCol:{xs:{span:16},sm:{span:5}},wrapperCol:{xs:{span:32},sm:{span:19}}},{onSubmit:this.handleSubmit}),h.a.createElement(u.a.Item,{label:"\u8def\u7ebf\u540d"},e("name",{initialValue:n,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7ebf\u8def\u540d\uff01"}]})(h.a.createElement(i.a,null))),h.a.createElement(u.a.Item,{label:"\u822a\u73ed"},e("flight",{initialValue:l,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u822a\u73ed\u53f7\uff01"}]})(h.a.createElement(i.a,null))),h.a.createElement(u.a.Item,{label:"\u822a\u73ed\u4ef7\u683c"},e("flightPrice",{initialValue:c,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u822a\u73ed\u4ef7\u683c\uff01"},{type:"number",message:"\u8bf7\u8f93\u5165\u6570\u5b57"}]})(h.a.createElement(o.a,null))),h.a.createElement(u.a.Item,{label:"\u9152\u5e97"},e("hotel",{initialValue:s,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9152\u5e97\u540d\uff01"}]})(h.a.createElement(i.a,null))),h.a.createElement(u.a.Item,{label:"\u9152\u5e97\u4ef7\u683c"},e("hotelPrice",{initialValue:d,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9152\u5e97\u4ef7\u683c\uff01"},{type:"number",message:"\u8bf7\u8f93\u5165\u6570\u5b57"}]})(h.a.createElement(o.a,null))),h.a.createElement(u.a.Item,{label:"\u5176\u4ed6\u8d39\u7528"},e("other",{initialValue:f,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5176\u4ed6\u8d39\u7528\uff01"},{type:"number",message:"\u8bf7\u8f93\u5165\u6570\u5b57"}]})(h.a.createElement(o.a,null))),h.a.createElement(u.a.Item,{label:"\u5f00\u59cb\u65f6\u95f4"},e("time",{initialValue:w()(p),rules:[{type:"object",required:!0,message:"\u8bf7\u8f93\u5165\u5f00\u59cb\u65f6\u95f4\uff01"}]})(h.a.createElement(a.a,null))),h.a.createElement(u.a.Item,{label:"\u65f6\u957f"},e("period",{initialValue:m,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u65f6\u957f\uff01"},{type:"number",message:"\u8bf7\u8f93\u5165\u6570\u5b57"}]})(h.a.createElement(o.a,null))),h.a.createElement(u.a.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},h.a.createElement(r.a,{type:"primary",htmlType:"submit"},"\u786e\u5b9a"))))):h.a.createElement(v.a,{to:""})}}]),t}(h.a.Component),R=u.a.create()(I);t.default=Object(g.b)((function(e){return{user:e.user}}),null)(R)}}]);
//# sourceMappingURL=12.21b1495f.chunk.js.map